A client can obtain a handle to the driver with the `CreateFile` API.

```
#include <Windows.h>
#include <stdio.h>

int main()
{
    // open handle
    printf("[+] Opening handle to driver\n");
    HANDLE hDriver = CreateFile(
        L"\\\\.\\FirstDriver",
        GENERIC_WRITE,
        FILE_SHARE_WRITE,
        nullptr,
        OPEN_EXISTING,
        0,
        nullptr);

    if (hDriver == INVALID_HANDLE_VALUE)
    {
        printf("[!] %s (%d)", "Failed to open handle", GetLastError());
        return 1;
    }

    // little sleep
    printf("[+] Sleeping...\n");
    Sleep(3000);

    // close handle
    printf("[+] Closing handle\n");
    CloseHandle(hDriver);
}
```



When we run this, it should print to the console.

```
C:\FirstDriver>FirstDriverClient.exe
[+] Opening handle to driver...success!
[+] Sleeping...
[+] Closing handle
```



And two corresponding messages in WinDbg.  The first when the handle is opened, the second when it's closed.

```
[+] Hello from FirstDriver CreateClose
[+] Hello from FirstDriver CreateClose
```