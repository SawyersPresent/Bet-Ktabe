KPP (aka PatchGuard) is a feature present in Windows designed to protect the kernel against unauthorised modifications.  It works by periodically checking structures that Microsoft deem sensitive and if a change is detected, it will trigger a bug check and crash the system.

When using drivers to circumvent certain kernel-level protection, we are going to stamp over KPP-protected regions.  One "weakness" of KPP is that because the checks are expensive (computationally), it's not constantly checking protected regions.  This introduces a type of race condition where we can modify a protected region and change it back without KPP noticing.

However, because you don't know when KPP will perform its next check, it's a little like playing Russian roulette.  We can reduce the risk by narrowing the window of time a protected region stays modified, but this doesn't eliminate it.

A final note - when Windows is put into test signing and kernel debug mode (shown in the next lesson), KPP is effectively disabled.  You therefore won't see Windows bug check due to KPP during development.